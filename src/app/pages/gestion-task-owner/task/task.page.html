<app-header title="Gestion Actividad" txtBack="Volver" href="/gestion-task-owner"></app-header>
<ion-content fullscreen *ngIf="actividad">

  <ion-card>
    <ion-card-header>
      <ion-card-subtitle>Proy: {{actividad.proyect_name}}</ion-card-subtitle>
      <ion-card-subtitle>Act: {{actividad.taskname}} - {{actividad.idActivity}} | Progreso: {{actividad.qty_tot_ejec}} / {{actividad.qty_ejecutar}}</ion-card-subtitle>
      <ion-card-subtitle>Cant: {{actividad.cantidad}}</ion-card-subtitle>
    </ion-card-header>
  </ion-card>
  <ion-card>

    <ion-card-content>
      <form [formGroup]="taskForm" (ngSubmit)="enviar()" novalidate>
        <ion-item>
          <ion-label position="fixed">Cant</ion-label>
          <ion-input [(ngModel)]="cantModel" [required]="flagExcep == 0"
                     formControlName="cantCtrl"
          ></ion-input>
          <span class="error ion-padding" *ngIf="isSubmitted && errorControl.cantCtrl.errors?.required">
      Requerido
    </span>
        </ion-item>
        <ion-item>
          <ion-label>Inicio</ion-label>
          <ion-datetime value=""
                        min="2021"
                        [required]="flagExcep == 0 || !flagExcep"
                        formControlName="dateIniCtrl"
                        [(ngModel)]="dateIni"
                        displayFormat="DD/MM/YYYY HH:mm"
                        monthShortNames="[Ene, Feb, Mar, Abr, May, Jun, Jul, Ago, Sep, Oct, Nov, Dic]"
                        placeholder="Seleccione fecha"></ion-datetime>
          <span class="error ion-padding" *ngIf="isSubmitted && errorControl.dateIniCtrl.errors?.required">
      Requerido
    </span>
        </ion-item>
        <ion-item>
          <ion-label>Termino</ion-label>
          <ion-datetime value=""
                        [(ngModel)]="dateFin"
                        [required]="flagExcep == 0"
                        formControlName="dateFinCtrl"
                        min="2021"
                        displayFormat="DD/MM/YYYY HH:mm"
                        placeholder="Seleccione fecha"></ion-datetime>
          <span class="error ion-padding" *ngIf="isSubmitted && errorControl.dateFinCtrl.errors?.required">
      Requerido
    </span>
        </ion-item>
        <ion-item>
          <ion-label position="fixed">Pausa</ion-label>
          <ion-input [(ngModel)]="pausaModel"
                     formControlName="pausaCtrl"></ion-input>
        </ion-item>
        <ion-list>
          <ion-radio-group [(ngModel)]="flagExcep" formControlName="flagExcepCtrl"
          [required]="">
            <ion-item>
              <ion-label [ngClass]="{'error': isSubmitted && errorControl.flagExcepCtrl.errors?.required}">Completado</ion-label>
              <ion-radio id="1" name="val1" value="0"></ion-radio>
            </ion-item>
            <ion-item>
              <ion-label [ngClass]="{'error': isSubmitted && errorControl.flagExcepCtrl.errors?.required}">No completado</ion-label>
              <ion-radio id="2" name="val2" value="1"></ion-radio>
            </ion-item>
          </ion-radio-group>
          <span class="error ion-padding" *ngIf="isSubmitted && errorControl.flagExcepCtrl.errors?.required">
      Selección requerida
    </span>
        </ion-list>

        <ion-item>
          <ion-label position="floating">Descripción</ion-label>
          <ion-textarea mode="ios" [(ngModel)]="obsExcep" formControlName="obsExcepCtrl"></ion-textarea>
        </ion-item>

        <ion-button color="success" expand="block" type="submit">
          <ion-icon slot="start" name="send-outline"></ion-icon>
          Enviar
        </ion-button>
      </form>
    </ion-card-content>
  </ion-card>
</ion-content>
